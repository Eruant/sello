/*! sello 06/06/2013 */
var http=require("http"),url=require("url"),path=require("path"),fs=require("fs"),port=process.env.PORT||5e3,io=require("socket.io"),socket;http.createServer(function(a,b){"use strict";var c="bin/"+url.parse(a.url).pathname,d=path.join(process.cwd(),c);path.exists(d,function(a){return a?(fs.statSync(d).isDirectory()&&(d+="index.html"),fs.readFile(d,"binary",function(a,c){return a?(b.writeHead(500,{"Content-Type":"text/plain"}),b.write(a+"\n"),b.end(),void 0):(b.writeHead(200),b.write(c,"binary"),b.end(),void 0)}),void 0):(b.writeHead(404,{"Content-Type":"text/plain"}),b.write("404 Not Found\n"),b.end(),void 0)})}).listen(port),io.configure(function(){io.set("transports",["xhr-polling"]),io.set("polling duration",10)}),socket=new io.Socket,socket.on("connection",function(a){"use strict";a.on("msg",function(a){io.sockets.emit("new",a)})}),console.log("Static file server running at \n => http://localhost:"+port+"\nCTRL + C to shutdown");